# furigana_font_maker

ゲームの字幕にルビ（ふりがな）を表示するために、フォントにルビを埋め込むプログラムです。ルビを表示する機能がない海外ゲームでも、ルビを表示できる可能性があります。

現在開発中のベータ版です。

## コンセプト
　　
ルビを指定したテキストとオリジナルのフォントを元に、ルビを埋め込んだ文字を生成してUnicodeの私用領域（URL）に割り当てます。この文字をテキストの文字と置き換えることで、ゲーム内でルビ表示を表示します。

＜コンセプト図＞

FontForgeのPythonモジュールでルビの文字のサイズと位置を指定し、自動的に埋め込んでいます（下図は自動合成したフォントをGUI版FontForgeで表示したもの）。

＜図＞


## 活用例

ゲームの字幕にルビを振ることで、表現の幅が広がります。

＜図＞

ゲームの固有名詞の原文を表示することで、「日本語化されると英語Wikiを検索できない」問題を解決します。

＜図＞


# 環境

* 
* 
* 


# 使い方

## インストール


## テキストの準備

ゲームのテキストで、親文字（ルビを振りたい文字）の前に「｜（全角縦線）」を書き、後ろに「《》（二重山括弧）」でルビを囲んで書く。

    ｜親文字《ルビ》

＜画像＞

## フォントの準備


## ルビ用フォント＆テキストの生成


## 生成したフォント＆テキストの確認

＜図＞


## 補足

現バージョンではルビは全て中央そろえの「グループルビ」（URL）で表示されます。一文字ずつルビを振りたい場合は、一文字ずつ指定します。

    ｜親《●》｜文《●》｜字《●》

＜図＞

現バージョンではルビがはみ出てもそのまま他の文字にかぶって表示されます。必要な場合は、半角スペースなどで調整してください。

    事故る奴は…｜不運《ハードラック》と｜踊《ダンス》っちまったんだよ…

＜図＞

    事故る奴は…  ｜不  運《ハードラック》  と ｜踊《ダンス》 っちまったんだよ…

＜図＞
　

# メモ

## 開発メモ

### 追加したい機能（優先度高）

* 例外処理
* 改行への対応
    * 現在は親文字の最初の文字に全てのルビを埋め込んでいるので、途中で改行が入るとルビが浮いてしまう。
    * 単語結合子（https://ja.wikipedia.org/wiki/%E5%8D%98%E8%AA%9E%E7%B5%90%E5%90%88%E5%AD%90）を使用？
    * キリがいい箇所で自動的に分割？
* 設定ファイルの読み込み機能
* プログラムの導入＆実行手順の簡略化
* 傍点用の記号の追加
    * 青空文庫では「○○［＃「○○」に傍点］」　https://www.aozora.gr.jp/annotation/emphasis.html
    * カクヨム記法では「《《○○》》」　https://kakuyomu.jp/help/entry/notation
* ルビの配置の変更機能
* ルビの配置の指定記号の追加

### 追加したい機能（優先度低）

* 「｜（全角縦線）」の省略に対応
    * 青空文庫ではこちらのページ（ＵＲＬ）のように、縦線がなくても漢字部分だけに
* 合字（ligature）を利用した振り仮名の実現
    * こちらのページ（URL）で「twitter」と書き込むと鳥の絵文字が表示されるように、特定のテキストをルビ付きの文字に置換する
    * メリット：テキストの文字を差し替えなくてよくなるので、エディタで開いた場合やフォントが変わった場合に文字化けしなくなる
    * デメリット：合字に対応していないゲームには使えない
　　

## 実装メモ

* 正規表現による抽出


# 参考文献

* アイデア
    * 検索した範囲では、ゲーム翻訳家の武藤陽生さんが考案者。フォントに手動でルビを埋め込み、「The Vanishing of Ethan Carter」に実装されている。
        * http://gametranslation.blog.fc2.com/blog-entry-29.html
        * https://twitter.com/Minstrel_Bird/status/995850877972889602
    * 私のアイデアメモ
        * https://twitter.com/kengo700/status/934231043820761088
        * https://twitter.com/kengo700/status/934242914510635008
* FontForgeのPythonプログラミングについて
    * 
* FontForgeによる複合グリフの生成について
    * 
* TrueTypeフォントの　　　について
    * 
* ルビの書式について
    * 青空文庫：https://www.aozora.gr.jp/KOSAKU/MANUAL_2.html
    * 小説家になろう：https://syosetu.com/man/ruby/
    * カクヨム：https://kakuyomu.jp/help/entry/notation
    * 吉里吉里：http://novel.yukigesho.com/kirikiri/a014.htm
    * CatSystem2：http://cs2.suki.jp/manual/index.html
    * Unity：http://kuwa8128.hatenablog.com/entry/2017/03/20/190223
* Pythonプログラミング
    * 
* 合字（Ligature）について